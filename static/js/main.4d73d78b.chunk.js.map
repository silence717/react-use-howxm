{"version":3,"sources":["../../src/dependencies.ts","../../src/index.ts","App.jsx","index.jsx"],"names":["scriptText","myLogger","console","info","App","useHowxm","initHowxm","identifyHowxm","openHowxm","checkOpenHowxm","eventHowxm","setExtraAttributes","uid","useEffect","onClick","price","plan","vip_level","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4d73d78b.chunk.js","sourcesContent":["import React, { useMemo, useCallback } from 'react';\n\nfunction appendHeadScript(scriptText, scriptId, appId) {\n    try {\n        var existingScript = document.getElementById(scriptId);\n        if (existingScript) {\n            (existingScript === null || existingScript === void 0 ? void 0 : existingScript.getAttribute('appId')) !== appId && (_howxm === null || _howxm === void 0 ? void 0 : _howxm('updateHowxm', appId));\n            return true;\n        }\n        var script = document.createElement('script');\n        script.id = scriptId;\n        script.setAttribute('appId', appId);\n        script.innerText = scriptText;\n        script.crossOrigin = 'anonymous';\n        document.head.appendChild(script);\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}\nfunction initScript(appId) {\n    var hasWindow = typeof window !== 'undefined';\n    if (!hasWindow)\n        throw Error('Howxm depends on window. Window is undefined.');\n    var scriptCode = \"function _howxm(){_howxmQueue.push(arguments)}window._howxmQueue=window._howxmQueue||[],_howxm(\\\"setAppID\\\",\\\"\" + appId + \"\\\"),function(){if(!document.getElementById(\\\"howxm_script\\\")){var e=document.createElement(\\\"script\\\"),t=document.getElementsByTagName(\\\"script\\\")[0];e.setAttribute(\\\"id\\\",\\\"howxm_script\\\"),e.type=\\\"text/javascript\\\",e.async=!0,e.src=\\\"https://static.howxm.com/sdk.js\\\",t.parentNode.insertBefore(e,t)}}();\";\n    var isAppended = appendHeadScript(scriptCode, 'howxm-init-script', appId);\n    if (isAppended && hasWindow && window._howxm) {\n        return true;\n    }\n    throw Error('Howxm initialization failed!');\n}\nfunction throwNotInitializedError() {\n    throw Error('Howxm is not available! Is Howxm initialized?');\n}\nfunction identifyScript(customerInfo) {\n    if (checkReadyState()) {\n        return window._howxm('identify', customerInfo);\n    }\n    throwNotInitializedError();\n}\nfunction openScript(campaignId, customer, extra, onCompleted) {\n    if (checkReadyState()) {\n        return window._howxm('open', {\n            campaignId: campaignId,\n            customer: customer,\n            extra: extra,\n            onCompleted: onCompleted,\n        });\n    }\n    throwNotInitializedError();\n}\nfunction checkOpenScript(campaignId, uid, onSuccess, onFailed) {\n    if (checkReadyState()) {\n        return window._howxm('checkOpen', {\n            campaignId: campaignId,\n            uid: uid,\n            onSuccess: onSuccess,\n            onFailed: onFailed,\n        });\n    }\n    throwNotInitializedError();\n}\nfunction checkReadyState() {\n    var hasWindow = typeof window !== 'undefined';\n    return !!(hasWindow && window._howxm);\n}\nfunction eventScript(eventCode, eventAttrs) {\n    if (checkReadyState()) {\n        return window._howxm('event', eventCode, eventAttrs);\n    }\n    throwNotInitializedError();\n}\nfunction setExtraAttributesScript(eventAttrs) {\n    if (checkReadyState()) {\n        return window._howxm('setExtraAttributes', eventAttrs);\n    }\n    throwNotInitializedError();\n}\n\nfunction useHowxm() {\n    var isReadyState = checkReadyState();\n    var _a = React.useState(useMemo(function () { return isReadyState; }, [isReadyState])), readyState = _a[0], setReadyState = _a[1];\n    var initHowxm = useCallback(function (appId, logCallback) {\n        try {\n            initScript(appId);\n            setReadyState(true);\n            if (logCallback && typeof logCallback === 'function')\n                logCallback(\"Howxm ready: true\");\n            return true;\n        }\n        catch (error) {\n            console.error(\"Howxm error: \" + error.message);\n            return false;\n        }\n    }, []);\n    var identifyHowxm = useCallback(function (customerInfo, logCallback) {\n        try {\n            identifyScript(customerInfo);\n            if (logCallback && typeof logCallback === 'function')\n                logCallback(\"Howxm identified\");\n            return true;\n        }\n        catch (error) {\n            console.error(\"Howxm error: \" + error.message);\n            return false;\n        }\n    }, []);\n    var checkOpenHowxm = useCallback(function (campaignId, uid, onSuccess, onFailed) {\n        try {\n            checkOpenScript(campaignId, uid, onSuccess, onFailed);\n        }\n        catch (error) {\n            console.error(\"Howxm error: \" + error.message);\n        }\n    }, []);\n    var openHowxm = useCallback(function (campaignId, customer, extra, onCompleted) {\n        try {\n            openScript(campaignId, customer, extra, onCompleted);\n        }\n        catch (error) {\n            console.error(\"Howxm error: \" + error.message);\n        }\n    }, []);\n    var eventHowxm = useCallback(function (eventCode, eventAttrs, logCallback) {\n        try {\n            eventScript(eventCode, eventAttrs);\n            if (logCallback && typeof logCallback === 'function') {\n                logCallback(\"Howxm event trigger success.\");\n            }\n        }\n        catch (error) {\n            console.error(\"Howxm error: \" + error.message);\n        }\n    }, []);\n    var setExtraAttributes = useCallback(function (eventAttrs, logCallback) {\n        try {\n            setExtraAttributesScript(eventAttrs);\n            if (logCallback && typeof logCallback === 'function') {\n                logCallback(\"Howxm set extra attributes success.\");\n            }\n        }\n        catch (error) {\n            console.error(\"Howxm error: \" + error.message);\n        }\n    }, []);\n    return useMemo(function () { return ({\n        readyState: readyState,\n        initHowxm: initHowxm,\n        identifyHowxm: identifyHowxm,\n        checkOpenHowxm: checkOpenHowxm,\n        openHowxm: openHowxm,\n        eventHowxm: eventHowxm,\n        setExtraAttributes: setExtraAttributes,\n    }); }, [readyState, initHowxm, identifyHowxm, checkOpenHowxm, openHowxm, eventHowxm, setExtraAttributes]);\n}\n\nexport { useHowxm as default };\n//# sourceMappingURL=index.es.js.map\n",null,"import React from 'react'\nimport { useEffect } from 'react'\n\nimport useHowxm from 'react-use-howxm'\n\nconst myLogger = console.info\n\nconst App = () => {\n  const { initHowxm, identifyHowxm, openHowxm, checkOpenHowxm, eventHowxm, setExtraAttributes } = useHowxm()\n  const campaignId = '<Your Campaign ID>'\n  const appId = '<Your App ID>'\n  const uid = 'my-uid'\n\n  useEffect(() => {\n    const isReady = initHowxm(appId, myLogger)\n    if (isReady) {\n      identifyHowxm({ uid })\n    }\n  }, [initHowxm, identifyHowxm])\n\n  const handleOpenClick = () => {\n    openHowxm(campaignId, { uid }, { price: 150 }, () => {\n      myLogger('openHowxm finished')\n    })\n  }\n\n  const handleCheckOpenClick = () => {\n    checkOpenHowxm(\n      campaignId,\n      uid,\n      () => {\n        myLogger('checkOpenHowxm success')\n      },\n      () => {\n        myLogger('checkOpenHowxm failed')\n      }\n    )\n  }\n\n  const handleTriggerEvent = () => {\n    eventHowxm('test1', {}, () => {\n      myLogger('triggerEvent success')\n    })\n  }\n\n  const handleSetExtraAttributes = () => {\n    const extraAttrs = {\n      plan: 'basic',\n      vip_level: '1',\n    }\n    setExtraAttributes(extraAttrs, () => {\n      myLogger('setExtraAttributes success')\n    })\n  }\n\n  return (\n    <>\n      <h1>Howxm SDK Example</h1>\n      <button onClick={handleOpenClick}>Open</button>\n      <button onClick={handleCheckOpenClick}>CheckOpen</button>\n      <button onClick={handleTriggerEvent}>TriggerEvent</button>\n      <button onClick={handleSetExtraAttributes}>setExtraAttributes</button>\n    </>\n  )\n}\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}